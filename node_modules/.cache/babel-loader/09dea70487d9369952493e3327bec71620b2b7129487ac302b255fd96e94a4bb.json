{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./ResultPage.css';import logo from'./assets/sonar-logo.png';// Ensure the path is correct\nimport{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResultPage=()=>{var _location$state;const location=useLocation();const navigate=useNavigate();const[loading,setLoading]=useState(true);const[result,setResult]=useState(null);const[query,setQuery]=useState('');const[relevantSections,setRelevantSections]=useState([]);const file=(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.file;useEffect(()=>{const uploadFile=async()=>{if(!file)return;const formData=new FormData();formData.append('file',file);try{const response=await axios.post('http://127.0.0.1:5000/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});setResult(response.data);}catch(error){console.error('Error uploading file:',error);setResult('An error occurred while processing the file.');}finally{setLoading(false);}};uploadFile();},[file]);const handleGoBack=()=>{navigate('/');};const handleQuerySubmit=async()=>{if(!query||!result)return;try{const response=await axios.post('http://127.0.0.1:5000/query',{query:query,sentences:result.Sentences});setRelevantSections(response.data);}catch(error){console.error('Error processing query:',error);}};const formatResult=data=>{let formattedResult=[];if(data[\"TOC Pages\"]){formattedResult.push(/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Table of Contents\"}),/*#__PURE__*/_jsx(\"td\",{children:data[\"TOC Pages\"]})]},\"toc\"));}if(data[\"Sections\"]){formattedResult=formattedResult.concat(Object.entries(data[\"Sections\"]).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:key}),/*#__PURE__*/_jsx(\"td\",{children:value})]},key);}));}return formattedResult;};return/*#__PURE__*/_jsx(\"div\",{className:\"result-page\",children:loading?/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"Sonar Logo\",className:\"loading-logo\"}),/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"is analyzing your file\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"result-container fade-in\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"result-title\",children:file===null||file===void 0?void 0:file.name}),/*#__PURE__*/_jsxs(\"table\",{className:\"result-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Section Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Pages\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:result&&formatResult(result)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"query-section\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sector-query\",children:\"Which sector / industry do you work in?\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"sector-query\",value:query,onChange:e=>setQuery(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleQuerySubmit,children:\"Submit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relevant-sections\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sections that might be relevant to you\"}),relevantSections.length>0?/*#__PURE__*/_jsx(\"ul\",{children:relevantSections.map((section,index)=>/*#__PURE__*/_jsxs(\"ul\",{children:[section.sentence,\", \",section.page]},index))}):/*#__PURE__*/_jsx(\"p\",{children:\"No relevant sections found.\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"back-button\",onClick:handleGoBack,children:\"Back\"})]})});};export default ResultPage;","map":{"version":3,"names":["React","useState","useEffect","axios","logo","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","ResultPage","_location$state","location","navigate","loading","setLoading","result","setResult","query","setQuery","relevantSections","setRelevantSections","file","state","uploadFile","formData","FormData","append","response","post","headers","data","error","console","handleGoBack","handleQuerySubmit","sentences","Sentences","formatResult","formattedResult","push","children","concat","Object","entries","map","_ref","key","value","className","src","alt","name","htmlFor","type","id","onChange","e","target","onClick","length","section","index","sentence","page"],"sources":["/Users/anantamanoranjan/Desktop/demo copy 2/pdf-toc-extractor/src/ResultPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './ResultPage.css';\nimport logo from './assets/sonar-logo.png';  // Ensure the path is correct\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nconst ResultPage = () => {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const [loading, setLoading] = useState(true);\n    const [result, setResult] = useState(null);\n    const [query, setQuery] = useState('');\n    const [relevantSections, setRelevantSections] = useState([]);\n    const file = location.state?.file;\n\n    useEffect(() => {\n        const uploadFile = async () => {\n            if (!file) return;\n\n            const formData = new FormData();\n            formData.append('file', file);\n\n            try {\n                const response = await axios.post('http://127.0.0.1:5000/upload', formData, {\n                    headers: {\n                        'Content-Type': 'multipart/form-data'\n                    }\n                });\n                setResult(response.data);\n            } catch (error) {\n                console.error('Error uploading file:', error);\n                setResult('An error occurred while processing the file.');\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        uploadFile();\n    }, [file]);\n\n    const handleGoBack = () => {\n        navigate('/');\n    };\n\n    const handleQuerySubmit = async () => {\n        if (!query || !result) return;\n\n        try {\n            const response = await axios.post('http://127.0.0.1:5000/query', {\n                query: query,\n                sentences: result.Sentences\n            });\n            setRelevantSections(response.data);\n        } catch (error) {\n            console.error('Error processing query:', error);\n        }\n    };\n\n    const formatResult = (data) => {\n        let formattedResult = [];\n        if (data[\"TOC Pages\"]) {\n            formattedResult.push(\n                <tr key=\"toc\">\n                    <td>Table of Contents</td>\n                    <td>{data[\"TOC Pages\"]}</td>\n                </tr>\n            );\n        }\n        if (data[\"Sections\"]) {\n            formattedResult = formattedResult.concat(\n                Object.entries(data[\"Sections\"]).map(([key, value]) => (\n                    <tr key={key}>\n                        <td>{key}</td>\n                        <td>{value}</td>\n                    </tr>\n                ))\n            );\n        }\n        return formattedResult;\n    };\n\n    return (\n        <div className=\"result-page\">\n            {loading ? (\n                <div className=\"loading-screen\">\n                    <img src={logo} alt=\"Sonar Logo\" className=\"loading-logo\" />\n                    <p className=\"loading-text\">is analyzing your file</p>\n                </div>\n            ) : (\n                <div className=\"result-container fade-in\">\n                    <h2 className=\"result-title\">{file?.name}</h2>\n                    <table className=\"result-table\">\n                        <thead>\n                            <tr>\n                                <th>Section Name</th>\n                                <th>Pages</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {result && formatResult(result)}\n                        </tbody>\n                    </table>\n\n                    <div className=\"query-section\">\n                        <label htmlFor=\"sector-query\">Which sector / industry do you work in?</label>\n                        <input\n                            type=\"text\"\n                            id=\"sector-query\"\n                            value={query}\n                            onChange={(e) => setQuery(e.target.value)}\n                        />\n                        <button onClick={handleQuerySubmit}>Submit</button>\n                    </div>\n\n                    <div className=\"relevant-sections\">\n                        <h3>Sections that might be relevant to you</h3>\n                        {relevantSections.length > 0 ? (\n                            <ul>\n                                {relevantSections.map((section, index) => (\n                                    <ul key={index}>\n                                        {section.sentence}, {section.page} \n                                    </ul>\n                                ))}\n                            </ul>\n                        ) : (\n                            <p>No relevant sections found.</p>\n                        )}\n                    </div>\n                    <button className=\"back-button\" onClick={handleGoBack}>Back</button>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default ResultPage;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,kBAAkB,CACzB,MAAO,CAAAC,IAAI,KAAM,yBAAyB,CAAG;AAC7C,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,KAAAC,eAAA,CACrB,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACgB,MAAM,CAAEC,SAAS,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACkB,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACoB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrB,QAAQ,CAAC,EAAE,CAAC,CAC5D,KAAM,CAAAsB,IAAI,EAAAX,eAAA,CAAGC,QAAQ,CAACW,KAAK,UAAAZ,eAAA,iBAAdA,eAAA,CAAgBW,IAAI,CAEjCrB,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAuB,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CAACF,IAAI,CAAE,OAEX,KAAM,CAAAG,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEL,IAAI,CAAC,CAE7B,GAAI,CACA,KAAM,CAAAM,QAAQ,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,IAAI,CAAC,8BAA8B,CAAEJ,QAAQ,CAAE,CACxEK,OAAO,CAAE,CACL,cAAc,CAAE,qBACpB,CACJ,CAAC,CAAC,CACFb,SAAS,CAACW,QAAQ,CAACG,IAAI,CAAC,CAC5B,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,CAAEA,KAAK,CAAC,CAC7Cf,SAAS,CAAC,8CAA8C,CAAC,CAC7D,CAAC,OAAS,CACNF,UAAU,CAAC,KAAK,CAAC,CACrB,CACJ,CAAC,CAEDS,UAAU,CAAC,CAAC,CAChB,CAAC,CAAE,CAACF,IAAI,CAAC,CAAC,CAEV,KAAM,CAAAY,YAAY,CAAGA,CAAA,GAAM,CACvBrB,QAAQ,CAAC,GAAG,CAAC,CACjB,CAAC,CAED,KAAM,CAAAsB,iBAAiB,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CAACjB,KAAK,EAAI,CAACF,MAAM,CAAE,OAEvB,GAAI,CACA,KAAM,CAAAY,QAAQ,CAAG,KAAM,CAAA1B,KAAK,CAAC2B,IAAI,CAAC,6BAA6B,CAAE,CAC7DX,KAAK,CAAEA,KAAK,CACZkB,SAAS,CAAEpB,MAAM,CAACqB,SACtB,CAAC,CAAC,CACFhB,mBAAmB,CAACO,QAAQ,CAACG,IAAI,CAAC,CACtC,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CACnD,CACJ,CAAC,CAED,KAAM,CAAAM,YAAY,CAAIP,IAAI,EAAK,CAC3B,GAAI,CAAAQ,eAAe,CAAG,EAAE,CACxB,GAAIR,IAAI,CAAC,WAAW,CAAC,CAAE,CACnBQ,eAAe,CAACC,IAAI,cAChB/B,KAAA,OAAAgC,QAAA,eACIlC,IAAA,OAAAkC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BlC,IAAA,OAAAkC,QAAA,CAAKV,IAAI,CAAC,WAAW,CAAC,CAAK,CAAC,GAFxB,KAGJ,CACR,CAAC,CACL,CACA,GAAIA,IAAI,CAAC,UAAU,CAAC,CAAE,CAClBQ,eAAe,CAAGA,eAAe,CAACG,MAAM,CACpCC,MAAM,CAACC,OAAO,CAACb,IAAI,CAAC,UAAU,CAAC,CAAC,CAACc,GAAG,CAACC,IAAA,MAAC,CAACC,GAAG,CAAEC,KAAK,CAAC,CAAAF,IAAA,oBAC9CrC,KAAA,OAAAgC,QAAA,eACIlC,IAAA,OAAAkC,QAAA,CAAKM,GAAG,CAAK,CAAC,cACdxC,IAAA,OAAAkC,QAAA,CAAKO,KAAK,CAAK,CAAC,GAFXD,GAGL,CAAC,EACR,CACL,CAAC,CACL,CACA,MAAO,CAAAR,eAAe,CAC1B,CAAC,CAED,mBACIhC,IAAA,QAAK0C,SAAS,CAAC,aAAa,CAAAR,QAAA,CACvB3B,OAAO,cACJL,KAAA,QAAKwC,SAAS,CAAC,gBAAgB,CAAAR,QAAA,eAC3BlC,IAAA,QAAK2C,GAAG,CAAE/C,IAAK,CAACgD,GAAG,CAAC,YAAY,CAACF,SAAS,CAAC,cAAc,CAAE,CAAC,cAC5D1C,IAAA,MAAG0C,SAAS,CAAC,cAAc,CAAAR,QAAA,CAAC,wBAAsB,CAAG,CAAC,EACrD,CAAC,cAENhC,KAAA,QAAKwC,SAAS,CAAC,0BAA0B,CAAAR,QAAA,eACrClC,IAAA,OAAI0C,SAAS,CAAC,cAAc,CAAAR,QAAA,CAAEnB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAE8B,IAAI,CAAK,CAAC,cAC9C3C,KAAA,UAAOwC,SAAS,CAAC,cAAc,CAAAR,QAAA,eAC3BlC,IAAA,UAAAkC,QAAA,cACIhC,KAAA,OAAAgC,QAAA,eACIlC,IAAA,OAAAkC,QAAA,CAAI,cAAY,CAAI,CAAC,cACrBlC,IAAA,OAAAkC,QAAA,CAAI,OAAK,CAAI,CAAC,EACd,CAAC,CACF,CAAC,cACRlC,IAAA,UAAAkC,QAAA,CACKzB,MAAM,EAAIsB,YAAY,CAACtB,MAAM,CAAC,CAC5B,CAAC,EACL,CAAC,cAERP,KAAA,QAAKwC,SAAS,CAAC,eAAe,CAAAR,QAAA,eAC1BlC,IAAA,UAAO8C,OAAO,CAAC,cAAc,CAAAZ,QAAA,CAAC,yCAAuC,CAAO,CAAC,cAC7ElC,IAAA,UACI+C,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,cAAc,CACjBP,KAAK,CAAE9B,KAAM,CACbsC,QAAQ,CAAGC,CAAC,EAAKtC,QAAQ,CAACsC,CAAC,CAACC,MAAM,CAACV,KAAK,CAAE,CAC7C,CAAC,cACFzC,IAAA,WAAQoD,OAAO,CAAExB,iBAAkB,CAAAM,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClD,CAAC,cAENhC,KAAA,QAAKwC,SAAS,CAAC,mBAAmB,CAAAR,QAAA,eAC9BlC,IAAA,OAAAkC,QAAA,CAAI,wCAAsC,CAAI,CAAC,CAC9CrB,gBAAgB,CAACwC,MAAM,CAAG,CAAC,cACxBrD,IAAA,OAAAkC,QAAA,CACKrB,gBAAgB,CAACyB,GAAG,CAAC,CAACgB,OAAO,CAAEC,KAAK,gBACjCrD,KAAA,OAAAgC,QAAA,EACKoB,OAAO,CAACE,QAAQ,CAAC,IAAE,CAACF,OAAO,CAACG,IAAI,GAD5BF,KAEL,CACP,CAAC,CACF,CAAC,cAELvD,IAAA,MAAAkC,QAAA,CAAG,6BAA2B,CAAG,CACpC,EACA,CAAC,cACNlC,IAAA,WAAQ0C,SAAS,CAAC,aAAa,CAACU,OAAO,CAAEzB,YAAa,CAAAO,QAAA,CAAC,MAAI,CAAQ,CAAC,EACnE,CACR,CACA,CAAC,CAEd,CAAC,CAED,cAAe,CAAA/B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}